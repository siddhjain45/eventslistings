<!DOCTYPE html>
<html>
<head>
    <meta charset='utf-8'>
    <meta http-equiv='X-UA-Compatible' content='IE=edge'>
    <title>Events</title>
    <meta name='viewport' content='width=device-width, initial-scale=1'>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.0.1/dist/css/bootstrap.min.css" rel="stylesheet" integrity="sha384-+0n0xVW2eSR5OomGNYDnhzAbDsOXxcvSN1TPprVMTNDbiYZCxYbOOl7+AMvyTG2x" crossorigin="anonymous">    
    <link rel="stylesheet" href="https://use.fontawesome.com/releases/v5.7.0/css/all.css" integrity="sha384-lZN37f5QGtY3VHgisS14W3ExzMWZxybE1SJSEsQp9S+oqd12jhcu+A56Ebc1zFSJ" crossorigin="anonymous">

</head>
<body>
    <div class="container-fluid "  style="height:180px; background-color: black;">
        <br><br>
        
            <h1 class="text-center text-light" style="font-size: 70px; font-family: fantasy;">Event Mania Web-app</h1>   
         <a href="/user/logout">   <h3 class="text-right text-light">LogOut</h3>    </a>  
        </div>
    <% if(suc>0){%> 
        <script>
            alert('event addded succesfully')
        </script>
        <%}%>
        <h1 style=" margin-left: 50%; margin-top: 15px">Listed Upcoming/ongoing Events</h1>
        <table style="display: inline;">
            <tr  style="display: inline;">
                <td class="container" style="width: 100px; display: inline;"></td>
                <td>
                    <div class="container my-5 m-lg-5" >
                        <div class="card shadow-lg p-3 mb-5 bg-body rounded " style="width: 25rem;">
                            <div class="card-body"  style="display: inline;">
                                <h4 class="card-title text-dark my-2" style="text-align: center;">Listing New Event</h4>
                               
                                <main class="form-signin my-4" >
                                    <form action="/user/addevent" method="POST" onsubmit="return validate();" >
    
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="name" autocomplete="off" placeholder="example" name="name" >
                                            <label for="floatingInput">Event Name</label>
                                            <p style="display: none;  color: red;" id="p1">please fill Event Name</p>
                                        </div><br>
                                        <div class="form-floating">
                                            <input type="text" style="font-weight: bold;" class="form-control" id="about" autocomplete="off"  placeholder="Event Description " maxlength="200" name="about" >
                                            <label for="floatingInput">About the Event</label>
                                            <p style="display: none;  color: red;" id="p2">Description must be atleast 100 characters</p>
                                        </div><br>
                                        <div class="form-floating">
                                            <input type="text" class="form-control" id="venue" autocomplete="off" placeholder="Venue" name="organiser" >
                                            <label for="floatingInput">Organisers name/company/institute</label>
                                            <p style="display: none;  color: red;" id="p3">please fill Organisers name</p>
                                        </div><br>
                                        
                                      
                                     
                                        <div class="form-floating">
                                            <select name="mode" class="form-select form-select-sm" id="mode">
                                                <option selected></option>
                                                <option value="Online" >Online</option>
                                                <option value="Offline" >Offline</option>
                                                            </select>
                                            <label for="floatingInput">Mode</label>
                                            <p style="display: none;  color: red;" id="p4">Select mode of event</p>
                                        </div><br>
                                       
                                      
                                        <div class="form-floating">
                                            <input type="date" class="form-control" id="start" autocomplete="off" placeholder=""name="start" required>
                                            <label for="floatingInput">Start Date</label>

                                        </div> <br>
                                        <div class="form-floating">
                                            <input type="date" class="form-control" id="end"  placeholder="" name="end" required >
                                            <label for="floatingPassword">End Date</label>
                                        </div><br>
                                        
                                        <div class="form-floating">
                                            <input type="url" class="form-control" id="url"  placeholder="" name="url" >
                                            <label for="floatingPassword">Registration Link</label>
                                            <p style= "display:none;   color: red;"  id="p6">please provide Registration or Website Link</p>
                                        </div>
                                        
    
                                       <br>
                                        <button class="w-100 btn btn-lg btn-warning" type="submit">Add Event</button>
                                        
                                    </form>
                                </main>
                            </div>
                        </div>
                    </div>
                </td>
            </tr>
        </table>
        

  <!-- for showin events  -->
 
        <table  style="display: inline; ">
           
            <%events.forEach(function(data){ %> 
            <tr  >
               
                <td class="container" style="width: 200px;"></td>
                <td>
                    <div class="container my-5 m-lg-5">
                        <div class="card shadow-lg p-3 mb-5 bg-body rounded " style="width: 40rem; height: 25rem;">
                            <div class="card-body"  style="display: inline;">
                                <h4 class="card-title text-dark my-2" style="text-align: center;"><%=data.name %></h4>
                              
                                <main class="form-signin my-4"  style="display: inline; font-family: Verdana, Geneva, Tahoma, sans-serif;">
                                
    
                                        <div class="form-floating" >
                                           
                                            <label for="floatingInput"> <strong> About Event -</strong> <%=data.about %></label>
                                        </div><br><br><br>
                                        <div class="form-floating">
                                           
                                            <label for="floatingPassword"><strong> Organisers -</strong> <%=data.organiser %></label>
                                        </div>
                                         <br>
                                       
                                       <div class="form-floating">
                                           
                                        <label for="floatingPassword"><strong> Mode -</strong> <%=data.mode %></label>
                                    </div>
                                     <br>
                                   
                                   <div class="form-floating">
                                           
                                    <label for="floatingPassword"><strong>Start Date -</strong> <%=data.start %></label>
                                </div>
                                 <br>
                               
                               <div class="form-floating">
                                           
                                <label for="floatingPassword"><strong>End Date -</strong> <%=data.end %></label>
                            </div>
                             <br>
                           <br><br>
                                
                                       <a href="<%=data.url%>" class="w-100 btn btn-lg btn-warning">Register</a>
                                        
                                   
                                </main>
                            </div>
                        </div>
                    </div>
                </td>
                <% })%>
            </tr>
        </table>
       
        <script >
            var p1 = document.getElementById("p1");
            let p2 = document.getElementById("p2")
            let p3 = document.getElementById("p3")
            let p4 = document.getElementById("p4")
            let p6 = document.getElementById("p6")
           
             
           
            function validate()
            {
             var name = document.getElementById("name");
            var about = document.getElementById("about")
            var venue = document.getElementById("venue")
            var mode = document.getElementById("mode")
              var url = document.getElementById("url")
            if(name.value.trim()=="")
            {
                p1.style.display="block";
                name.style.border = "2px solid red"
                return false;

            }
            else if (about.value.trim().length<10)
            {
                p1.style.display="none";
                name.style.border = ""
                p2.style.display="block"
                about.style.border = "2px solid red"
                return false;
                
            }
           else if(venue.value.trim()=="")
            { p1.style.display="none";
                name.style.border = ""
                p2.style.display="none"
                about.style.border = ""
                p3.style.display="block";
                venue.style.border = "2px solid red"
                return false;

            }
           
            else if (mode.value.trim()=="")
            {
                p1.style.display="none";
                name.style.border = ""
                p2.style.display="none"
                about.style.border = ""
                p3.style.display="none";
                venue.style.border = ""
                p4.style.display="block"
                mode.style.border = "2px solid red"
                
                return false;
                
            }
            else if(url.value.trim()=="")
            {
                p1.style.display="none";
                name.style.border = ""
                p2.style.display="none"
                about.style.border = ""
                p3.style.display="none";
                venue.style.border = ""
                p4.style.display="none"
                mode.style.border = ""
                p6.style.display="block"
                venue.style.border = "2px solid red"
                
                return false;
            }
            else
                return true;
            }
         </script>    
</body>
</html>
